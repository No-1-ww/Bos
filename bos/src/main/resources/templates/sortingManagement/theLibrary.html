<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>入库</title>
    <link rel="stylesheet" type="text/css" href="../../layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="../css/page.css">
</head>
<body>
<!-- 外部整体 -->
<div class="external">
    <!-- 标题 -->
    <p class="ptitle">出库交接单</p>
    <!-- 操作区域 -->
    <div class="operation">
        <!-- 向上间距 -->
        <div style="height: 10px;"></div>
        <form class="layui-form" action="">
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">出库交接单:</label>
                    <div class="layui-input-block" style="width: 150px;">
                        <input type="text" name="title" placeholder="出库交接单号" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <div class="layui-inline">
                    <label class="layui-form-label" >交接单类型:</label>
                    <div class="layui-input-block" style="width: 150px;">
                        <select name="city" lay-verify="required">
                            <option value=""></option>
                            <option value="0">市内物流交接单</option>
                            <option value="1">长途物流交接单</option>
                            <option value="1">派送清单</option>
                            <option value="1">发货交接单</option>
                        </select>
                    </div>
                </div>

                <!-- 查询按钮组 -->
                <div class="layui-inline">
                    <button id="queryWhereOutBound" type="button" class="layui-btn btnQuery">
                        <i class="layui-icon">&#xe615;</i> 查询
                    </button>

                    <button type="button" class="layui-btn btnOther">
                        <i class="layui-icon">&#x1002;</i> 重置
                    </button>

                    <button id="btnMore" type="button" class="layui-btn btnOther">
                        <i class="layui-icon">&#xe671;</i>更多
                    </button>
                </div>

            </div>

            <!-- 隐藏其它查询条件 -->
            <div id="hQuery" style="display: none;">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">线路资源:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入线路资源" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">物流方向:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入物流方向" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">接货人</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入接货人" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">承运商</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入承运商" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">出货人:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入出货人" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">出货时间:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入出货时间" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">出货单位</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入出货单位" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">确认人</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入确认人" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                </div>

                <div class="layui-form-item">

                    <div class="layui-inline">
                        <label class="layui-form-label">确认时间</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入确认时间" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">工作单号:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入工作单号" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">合包号:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入合包号" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">扫描时间</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入扫描时间" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                </div>

                <div class="layui-form-item">

                    <div class="layui-inline">
                        <label class="layui-form-label">是否扫描</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <select name="city" lay-verify="required">
                                <option value=""></option>
                                <option value="0">否</option>
                                <option value="1">是</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">下环节入库:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <select name="city" lay-verify="required">
                                <option value=""></option>
                                <option value="0">否</option>
                                <option value="1">是</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">二次入库:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <select name="city" lay-verify="required">
                                <option value=""></option>
                                <option value="0">否</option>
                                <option value="1">是</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">录入货票号</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <select name="city" lay-verify="required">
                                <option value=""></option>
                                <option value="0">否</option>
                                <option value="1">是</option>
                            </select>
                        </div>
                    </div>

                </div>

            </div>

            <!-- 操作按扭组 -->
            <div class="layui-form-item" style="padding-left: 11px;height: 30px;">
                <div class="layui-inline">
                    <button type="button" class="layui-btn layui-btn-small btnQuery" id="opAdd">新增出库</button>
                    <button type="button" class="layui-btn layui-btn-small btnOther" id="opEdit">修改</button>
                    <button type="button" class="layui-btn layui-btn-small btnOther" id="opDelete">删除</button>
                </div>
            </div>

            <!-- 数据表格 -->
            <table class="layui-table" id="SorOutBound" lay-filter="SorOutBound">
                <!--<colgroup>
                    <col width="50">
                    <col width="80">
                    <col width="160">
                    <col width="180">
                    <col width="140">
                    <col width="110">
                    <col width="110">
                    <col width="110">
                    <col width="110">
                    <col width="110">
                    <col width="110">
                    <col width="110">
                    <col width="110">
                    <col>
                </colgroup>
                <thead>
                <tr>
                    <th><input type="checkbox" name="check" lay-skin="primary"></th>
                    <th>序号</th>
                    <th>出库交接单号</th>
                    <th>交接单类型</th>
                    <th>线路资源</th>
                    <th>物流方向</th>
                    <th>接货人</th>
                    <th>承运商</th>
                    <th>出货人</th>
                    <th>出货时间</th>
                    <th>出货单位</th>
                    <th>确认人</th>
                    <th>确认时间</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><input type="checkbox" name="check" lay-skin="primary"></td>
                    <td>1</td>
                    <td>JJD1001</td>
                    <td>2017-11-11 11:11:11</td>
                    <td>老王</td>
                    <td>长沙分部</td>
                    <td>老张</td>
                    <td>深圳分部</td>
                    <td>深圳分部</td>
                    <td>深圳分部</td>
                    <td>深圳分部</td>
                    <td>深圳分部</td>
                    <td>深圳分部</td>
                    <td>
                        <button type="button" class="layui-btn layui-btn-small btnQuery" id="opQueryDetail">查看明细</button>
                    </td>
                </tr>
                </tbody>-->
            </table>
        </form>
    </div>

</div>
</div>
<script type="text/javascript" src="../../custom/jquery.min.js"></script>
<script type="text/javascript" src="../../layer/layer.js"></script>
<script type="text/javascript" src="../../layui/layui.js"></script>
<script type="text/html" id="barDemo">
    <button type="button" lay-event="edit" class="layui-btn layui-btn-small btnQuery" name="opQueryDetail">查看明细</button>
</script>
<script type="text/javascript">
    //加载'form'模块，使checkbox、select、radio初始化
    layui.use('form', function(){
        var form = layui.form;
        form.render("checkbox")
    });

    //加载'table'组件
    layui.use('table', function(){
        var table = layui.table;
        table.render({
            id:"TableSorOutBound",
            elem:"#SorOutBound",
            url:"/queryAllOutBound",
            height: 400,
            limit: 5,
            limits:[5,10,15,20],
            cols: [
                [
                    {checkbox:true}
                    ,{field: 'OutBoundID', title: '出库交接单号',width:150 , sort: true}
                    ,{field: 'HandoverType', title: '交接单类型',width:105}
                    ,{field: 'Line', title: '线路资源',width:130,  sort: true, totalRow: true}
                    ,{field: 'Direction', title: '物流方向', width:103, sort: true}
                    ,{field: 'AcceptPerson', title: '接货人', width:90, sort: true}
                    ,{field: 'Carriers', title: '承运商', width:90, sort: true}
                    ,{field: 'DeliveryPerson', title: '出货人', width:90, sort: true}
                    ,{field: 'DeliveryDate', title: '出货时间', width:130, sort: true}
                    ,{field: 'DeliveryCompany', title: '出货单位', width:100, sort: true}
                    ,{field: 'EnterPerson', title: '确认人', width:100, sort: true}
                    ,{field: 'EnterDate', title: '确认时间', width:130, sort: true}
                    ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:150}
                ]
            ],
            page:true,
            //回调函数
            done: function(res, curr, count){
                //如果是异步请求数据方式，res即为你接口返回的信息。
                //如果是直接赋值的方式，res即为：{data: [], count: 99} data为当前页数据、count为数据总长度


                //得到当前页码
                //alert(curr);

                //得到数据总量
                //alert(count);
            }



        });
        //监听行内工具栏事件
        //lay-event="edit"这句代码为了找到对应的按钮，万一有多个就需要该属性

        table.on('tool(SorOutBound)',function (obj) {
            var data = obj.data;
            alert(data.OutBoundID);
            layer.open({
                title: ['查看明细', 'color:#fff;background:#1da02b;'],
                type: 2,
                //skin: 'layui-layer-rim', //加上边框
                area: ['860px', '340px'], //宽高
                content: '/sortingManagement/theLibrary_list'
            });
        })

    });

    $("#queryWhereOutBound").click(function () {
        //查询
        layui.use('table', function() {
            var table = layui.table;
            table.reload('idTest', {
                where: { //设定异步数据接口的额外参数，任意设
                    aaaaaa: 'xxx'
                    , bbb: 'yyy'
                    //…
                }
                , page: {
                    curr: 1 //重新从第 1 页开始
                }
            });
        });
    })

    //加载'laydate'时间组件
    layui.use('laydate', function(){
        var laydate = layui.laydate;
        //执行一个laydate实例
        laydate.render({
            elem: '#opTime' //指定元素
        });
    });

    $(function(){
        //显示、隐藏剩余的查询条件
        $('#btnMore').click(function(){
            $("#hQuery").toggle();
        });

        //修改
        $('#opEdit').click(function(){
            //页面层
            layer.open({
                title: ['修改', 'color:#fff;background:#1da02b;'],
                type: 2,
                //skin: 'layui-layer-rim', //加上边框
                area: ['660px', '340px'], //宽高
                content: '/systemManagement/theLibrary_add'
            });
        });

        //查看明细
       /* $('button[name=opQueryDetail]').click(function(){
            //页面层
            layer.open({
                title: ['查看明细', 'color:#fff;background:#1da02b;'],
                type: 2,
                //skin: 'layui-layer-rim', //加上边框
                area: ['860px', '340px'], //宽高
                content: '/sortingManagement/theLibrary_list'
            });
        });*/

        //新增出库交接单
        $('#opAdd').click(function(){
            //页面层
            layer.open({
                title: ['新增出库交接单', 'color:#fff;background:#1da02b;'],
                type: 2,
                //skin: 'layui-layer-rim', //加上边框
                area: ['960px', '484px'], //宽高
                content: '/sortingManagement/theLibrary_add',
                end:function () {
                    layui.use('layer',function () {
                        var layer = layui.layer;
                        layer.msg("执行完毕");
                    })
                }
            });
        });

    });

</script>

</body>
</html>
