<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>单位</title>
	<link rel="stylesheet" type="text/css" href="../../layui/css/layui.css">
</head>
<body>
<div class="layui-form">
	<div class="layui-tab layui-tab-brief">
		<ul class="layui-tab-title">
			<li class="layui-this">修改单位</li>
		</ul>
		<div class="layui-tab-content" style="height: 100px;">
			<div class="layui-tab-item layui-show">
				<form class="layui-form" action="" method="post" id="addUntis">
				<table class="layui-table" style="width: 98%;margin: 1px auto;text-align: center;">
					<tbody>
					<tr>
						<td class="layui-bg-gray" width="30%">单位名称</td>
						<td width="70%">
							<input type="text" name="title" id="name" placeholder="请输入单位名称" autocomplete="off" class="layui-input">
						</td>
					</tr>
					<tr>
						<td class="layui-bg-gray">备注</td>
						<td colspan="3">
							<input type="text" name="title" id="reMarks" placeholder="请输入备注" autocomplete="off" class="layui-input">
						</td>
					</tr>
					
					<tr>
						<td colspan="6">
							<!--<button class="layui-btn" style="background: #1da02b;">确定</button>-->
							<input  type="button" lay-submit="" id="add"  class="layui-btn" style="background: #1da02b;" lay-filter="suu"  value="确定">
							<button type="button" class="layui-btn layui-btn-primary">取消</button>
						</td>
					</tr>
					</tbody>
				</table>
				</form>
			</div>

		</div>
	</div>

</div>
<script type="text/javascript" src="../../custom/jquery.min.js"></script>
<script type="text/javascript" src="../../layui/layui.js"></script>
<script type="text/javascript">

	//修改的赋值
layui.use(['form','layer'],function () {
		var layer = layui.layer
				, form = layui.form;

		var ID=[[${ID}]];
		//alert(ID);
		$.ajax({
			url:'/findUntisUpdateByID',
			data:{"ID":ID},
			type:"get",
			success:function (data) {
				console.log($.parseJSON(data).ID);
				$("#name").val($.parseJSON(data).Name);
				$("#reMarks").val($.parseJSON(data).Remarks);
				form.render('select');
			}
		})

	})


	//保存修改
	//加载'form'模块，使checkbox、select、radio初始化
layui.use(['form','layer'], function(){
		//渲染
		var form = layui.form
				,layer=layui.layer;

		//监听提交
		form.on('submit(suu)',function (data) {
			var name=$('#name').val();
			var reMarks=$('#reMarks').val();
			var ID=[[${ID}]];
			alert(name+"  "+reMarks);
			$.ajax({
				url:'/updateSyUntis',
				type:'get',
				data:{
					"name":name,
					"reMarks":reMarks,
					"ID":ID
				},
				success:function (res) {
					layer.alert("修改成功！", {icon: 6},function () {
						// 获得frame索引
						var index = parent.layer.getFrameIndex(window.name);
						parent.location.reload(); //刷新父页面
						//关闭当前frame
						parent.layer.close(index);
						$(".layui-form").submit();
					});
					return false;
				}
			})
		})
		/**
		 * 取消 退出
		 */
		$("#exit").click(function(){

			var index = parent.layer.getFrameIndex(window.name);
			parent.layer.close(index);
		})
});

	//注意：选项卡 依赖 element 模块，否则无法进行功能性操作
	layui.use('element', function(){
		var element = layui.element;

		//…
	});

</script>
</body>
</html>
